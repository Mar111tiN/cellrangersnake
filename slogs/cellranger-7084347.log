+++ which conda
+++ alias
+++ eval declare -f
++++ declare -f
+++ /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot conda
++ /data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda shell.bash hook
+ eval 'export CONDA_EXE='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python'\''

# Copyright (C) 2012 Anaconda, Inc
# SPDX-License-Identifier: BSD-3-Clause

__conda_exe() (
    "$CONDA_EXE" $_CE_M $_CE_CONDA "$@"
)

__conda_hashr() {
    if [ -n "${ZSH_VERSION:+x}" ]; then
        \rehash
    elif [ -n "${POSH_VERSION:+x}" ]; then
        :  # pass
    else
        \hash -r
    fi
}

__conda_activate() {
    if [ -n "${CONDA_PS1_BACKUP:+x}" ]; then
        # Handle transition from shell activated with conda <= 4.3 to a subsequent activation
        # after conda updated to >= 4.4. See issue #6173.
        PS1="$CONDA_PS1_BACKUP"
        \unset CONDA_PS1_BACKUP
    fi
    \local ask_conda
    ask_conda="$(PS1="${PS1:-}" __conda_exe shell.posix "$@")" || \return
    \eval "$ask_conda"
    __conda_hashr
}

__conda_reactivate() {
    \local ask_conda
    ask_conda="$(PS1="${PS1:-}" __conda_exe shell.posix reactivate)" || \return
    \eval "$ask_conda"
    __conda_hashr
}

conda() {
    \local cmd="${1-__missing__}"
    case "$cmd" in
        activate|deactivate)
            __conda_activate "$@"
            ;;
        install|update|upgrade|remove|uninstall)
            __conda_exe "$@" || \return
            __conda_reactivate
            ;;
        *)
            __conda_exe "$@"
            ;;
    esac
}

if [ -z "${CONDA_SHLVL+x}" ]; then
    \export CONDA_SHLVL=0
    # In dev-mode CONDA_EXE is python.exe and on Windows
    # it is in a different relative location to condabin.
    if [ -n "${_CE_CONDA:+x}" ] && [ -n "${WINDIR+x}" ]; then
        PATH="$(\dirname "$CONDA_EXE")/condabin${PATH:+":${PATH}"}"
    else
        PATH="$(\dirname "$(\dirname "$CONDA_EXE")")/condabin${PATH:+":${PATH}"}"
    fi
    \export PATH

    # We'\''re not allowing PS1 to be unbound. It must at least be set.
    # However, we'\''re not exporting it, which can cause problems when starting a second shell
    # via a first shell (i.e. starting zsh from bash).
    if [ -z "${PS1+x}" ]; then
        PS1=
    fi
fi

conda activate base'
++ export CONDA_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda
++ CONDA_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python
++ CONDA_PYTHON_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python
++ '[' -z x ']'
++ conda activate base
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate base
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate base
+++ /data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda shell.posix activate base
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin'\''
export CONDA_SHLVL='\''1'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin'\''
export CONDA_SHLVL='\''1'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\'''
+++ PS1='(base) '
+++ export PATH=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin
+++ PATH=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate cellranger-env
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate cellranger-env
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate cellranger-env
++ /data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda shell.posix activate cellranger-env
+ ask_conda='PS1='\''(cellranger-env) '\''
export PATH='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin'\''
export CONDA_PREFIX='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''cellranger-env'\''
export CONDA_PROMPT_MODIFIER='\''(cellranger-env) '\''
export CONDA_PREFIX_1='\''/data/gpfs-1/work/users/szyskam_c/mambaforge'\''
export CONDA_EXE='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python'\'''
+ eval 'PS1='\''(cellranger-env) '\''
export PATH='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin'\''
export CONDA_PREFIX='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''cellranger-env'\''
export CONDA_PROMPT_MODIFIER='\''(cellranger-env) '\''
export CONDA_PREFIX_1='\''/data/gpfs-1/work/users/szyskam_c/mambaforge'\''
export CONDA_EXE='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python'\'''
++ PS1='(cellranger-env) '
++ export PATH=/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin
++ PATH=/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/bin:/data/gpfs-1/work/users/szyskam_c/mambaforge/condabin:/data/gpfs-1/users/szyskam_c/work/utils/myscripts/symlinx:/data/gpfs-1/users/szyskam_c/.local/bin:/data/gpfs-1/users/szyskam_c/work/utils/cellranger-7.0.1/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/slurm/active/bin:/opt/slurm/active/sbin
++ export CONDA_PREFIX=/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env
++ CONDA_PREFIX=/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=cellranger-env
++ CONDA_DEFAULT_ENV=cellranger-env
++ export 'CONDA_PROMPT_MODIFIER=(cellranger-env) '
++ CONDA_PROMPT_MODIFIER='(cellranger-env) '
++ export CONDA_PREFIX_1=/data/gpfs-1/work/users/szyskam_c/mambaforge
++ CONDA_PREFIX_1=/data/gpfs-1/work/users/szyskam_c/mambaforge
++ export CONDA_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda
++ CONDA_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python
++ CONDA_PYTHON_EXE=/data/gpfs-1/work/users/szyskam_c/mambaforge/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ echo /data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env activated
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env activated
+ SLURM_CLUSTER='sbatch -p {cluster.partition} -t {cluster.t} --mem-per-cpu={cluster.mem} -J {cluster.name} --nodes={cluster.nodes} -n {cluster.threads}'
+ SLURM_CLUSTER='sbatch -p {cluster.partition} -t {cluster.t} --mem-per-cpu={cluster.mem} -J {cluster.name} --nodes={cluster.nodes} -n {cluster.threads} -o /data/gpfs-1/users/szyskam_c/scratch/slogs/cellranger-7084347/{rule}-%j.log'
+ snakemake --unlock
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/lib/python3.11/site-packages/openpyxl/worksheet/_read_only.py:79: UserWarning: Conditional Formatting extension is not supported and will be removed
  for idx, row in parser.parse():
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/lib/python3.11/site-packages/openpyxl/worksheet/_read_only.py:79: UserWarning: Conditional Formatting extension is not supported and will be removed
  for idx, row in parser.parse():
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/lib/python3.11/site-packages/openpyxl/worksheet/_read_only.py:79: UserWarning: Conditional Formatting extension is not supported and will be removed
  for idx, row in parser.parse():
Unlocking working directory.
[1;35;2m20:52:48[0m : [1;31;1mPlease provide a {file_type} in the configs[0m
[1;35;2m20:52:51[0m : [1;36;1mCreated ADT feature files for runs 211001, 211108[0m
+ snakemake --use-conda --rerun-incomplete --cluster-config configs/cluster/cellranger-cluster.json --cluster 'sbatch -p {cluster.partition} -t {cluster.t} --mem-per-cpu={cluster.mem} -J {cluster.name} --nodes={cluster.nodes} -n {cluster.threads} -o /data/gpfs-1/users/szyskam_c/scratch/slogs/cellranger-7084347/{rule}-%j.log' -prkj 3000
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/lib/python3.11/site-packages/openpyxl/worksheet/_read_only.py:79: UserWarning: Conditional Formatting extension is not supported and will be removed
  for idx, row in parser.parse():
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/lib/python3.11/site-packages/openpyxl/worksheet/_read_only.py:79: UserWarning: Conditional Formatting extension is not supported and will be removed
  for idx, row in parser.parse():
/data/gpfs-1/work/users/szyskam_c/mambaforge/envs/cellranger-env/lib/python3.11/site-packages/openpyxl/worksheet/_read_only.py:79: UserWarning: Conditional Formatting extension is not supported and will be removed
  for idx, row in parser.parse():
Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cluster nodes: 3000
Job stats:
job               count    min threads    max threads
--------------  -------  -------------  -------------
all                   1              1              1
run_cellranger        2             30             30
total                 3              1             30

Select jobs to execute...

[Tue Dec 20 20:52:53 2022]
rule run_cellranger:
    input: lib_files/library_CD8-2S.csv
    output: cellranger/CD8-2S.done
    jobid: 7
    reason: Missing output files: cellranger/CD8-2S.done
    wildcards: sample=CD8-2S
    threads: 30
    resources: mem_mb=1000, disk_mb=1000, tmpdir=<TBD>

cellranger count --localcores 30 --id=CD8-2S --libraries=lib_files/library_CD8-2S.csv --transcriptome=/fast/groups/ag_schmueck/work/ref/hg38/10x/refdata-gex-GRCh38-2020-A --feature-ref=ADT_files/ADT_211108.csv --check-library-compatibility=false --chemistry SC5P-PE; rm CD8-2S/_*; rm -r CD8-2S/SC_RNA_COUNTER_CS; touch cellranger/CD8-2S.done
sbatch:  
Submitted job 7 with external jobid 'Submitted batch job 7084353'.

[Tue Dec 20 20:52:55 2022]
rule run_cellranger:
    input: lib_files/library_CD8-1.csv
    output: cellranger/CD8-1.done
    jobid: 1
    reason: Missing output files: cellranger/CD8-1.done
    wildcards: sample=CD8-1
    threads: 30
    resources: mem_mb=1000, disk_mb=1000, tmpdir=<TBD>

cellranger count --localcores 30 --id=CD8-1 --libraries=lib_files/library_CD8-1.csv --transcriptome=/fast/groups/ag_schmueck/work/ref/hg38/10x/refdata-gex-GRCh38-2020-A --feature-ref=ADT_files/ADT_211001.csv --check-library-compatibility=false --chemistry SC5P-PE; rm CD8-1/_*; rm -r CD8-1/SC_RNA_COUNTER_CS; touch cellranger/CD8-1.done
sbatch:  
Submitted job 1 with external jobid 'Submitted batch job 7084354'.
[Tue Dec 20 22:06:17 2022]
Finished job 1.
1 of 3 steps (33%) done
[Wed Dec 21 02:31:43 2022]
Finished job 7.
2 of 3 steps (67%) done
Select jobs to execute...

[Wed Dec 21 02:31:43 2022]
localrule all:
    input: cellranger/CD8-1.done, cellranger/CD8-1.done, cellranger/CD8-1S.done, cellranger/CD8-1S.done, cellranger/CD8-2.done, cellranger/CD8-2.done, cellranger/CD8-2S.done, cellranger/CD8-2S.done
    jobid: 0
    reason: Input files updated by another job: cellranger/CD8-1.done, cellranger/CD8-2S.done
    resources: mem_mb=1000, disk_mb=1000, tmpdir=/fast/users/szyskam_c/scratch/tmp

[Wed Dec 21 02:31:43 2022]
Finished job 0.
3 of 3 steps (100%) done
Complete log: ../../../../../work/users/szyskam_c/snakes/cellrangersnake/.snakemake/log/2022-12-20T205251.697342.snakemake.log
[1;35;2m20:52:52[0m : [1;31;1mPlease provide a {file_type} in the configs[0m
[1;35;2m20:52:52[0m : [1;36;1mCreated ADT feature files for runs 211001, 211108[0m
